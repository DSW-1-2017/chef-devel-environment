#! /bin/sh
# /etc/init.d/hubot
#

case "$1" in
  start)
    echo "Starting docker for Hubot | bot: <%= @rocketchat_user %>"
    docker run -i \
      -e ROCKETCHAT_URL=<%= @rocketchat_url %>\
      -e ROCKETCHAT_ROOM=<%= @rocketchat_room %>\
      -e LISTEN_ON_ALL_PUBLIC=<%= @listen_on_all_public %>\
      -e ROCKETCHAT_USER=<%= @rocketchat_user %>\
      -e ROCKETCHAT_PASSWORD=<%= @rocketchat_password %>\
      -e ROCKETCHAT_AUTH=<%= @rocketchat_auth %>\
      -e BOT_NAME=<%= @bot_name %>\
      -e EXTERNAL_SCRIPTS=<%= @external_scripts %>\
      rocketchat/hubot-rocketchat
    ;;
  stop)
    echo "Stopping docker for Hubot"
    pkill -9 docker
    ;;
  *)
    echo "Usage: /etc/init.d/ {start|stop}"
    exit 1
    ;;
esac

exit 0
